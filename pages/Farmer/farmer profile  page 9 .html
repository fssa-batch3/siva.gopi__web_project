<!DOCTYPE html>
<html lang="en">

    <head>
        <title>
            farmer edit page10
        </title>
        <link rel="stylesheet" href="../../assets/style.css/Farmer edit 10 .css">
    </head>

    <body>

        <header>
            <a class="navigationlink" href="../Farmer/Farmer home page 4.html">
                <img src="../../images/arrow-back-outline.svg" alt="arrow logo" width="50px" height="100px">
            </a>

            <h1 class="t">
                <strong> PROFILE </strong>
            </h1>

        </header>
        <hr>

        <div class="container">
            <div>

                <img src="../../images/a37d2d1dfafd6d7d21148b8d28e409f6.jpg" class="profile" alt="profile logo"
                    width="250px">

            </div>
            <form onsubmit="signIn(event);">
                <div class="bu">

                    <div>
                        <img src="../../images/person.svg" alt="preson logo" width="80px">
                    </div>

                    <div>

                        <div class="b">
                            <input type="text " placeholder="  NAME " id = "name" required="true">
                        </div>
                    </div>

                </div>

                <div class="bu">
                    <div>
                        <img src="../../images/call.svg" alt="call logo" width="80px">
                    </div>

                    <div class="b">
                        <input type="text " placeholder="MOBILE NUMBER " id ="mobile_number" required="true">
                    </div>

                </div>

                <div class="bu">
                    <div>
                        <img src="../../images/call.svg" alt="call logo" width="80px">
                    </div>

                    <div class="b">
                        <input type="text " placeholder="District " id ="district" required="true">
                    </div>

                </div>

                <div class="bu">
                    <div>
                        <img src="../../images/call.svg" alt="call logo" width="80px">
                    </div>

                    <div class="b">
                        <input type="text " placeholder="Town " id="town" required="true">
                    </div>

                </div>

            </form>

            <div>
                <button class="img2" type="submit" onclick="update(event)">Save</button>
            </div>
            <div>
                <button class="img2" type="submit" onclick="log_out(event)">Log Out</button>
            </div>
            <div>
                <button class="img2" type="submit" onclick="del(event)">Delete</button>
            </div>

        </div>
        <script>// let user_list = JSON.parse(localStorage.getItem('user_list'));
    // let unique_id = JSON.parse(localStorage.getItem('unique'));

const user_list = JSON.parse(localStorage.getItem("user_list"));
console.log(user_list);

const unique_id = JSON.parse(localStorage.getItem("unique"));
    console.log(unique_id);
    function profile_data(e) {
      return e.mobile_number == unique_id;
    }
    const user_data = user_list.find(profile_data);
    console.log(user_data);
    document.getElementById("name").value = user_data.name;
    document.getElementById("mobile_number").value = user_data.mobile_number;
    document.getElementById("district").value = user_data.district;
    document.getElementById("town").value = user_data.town;

    function update(e) {
      const name = document.getElementById("name").value;
      const mobile_number = document.getElementById("mobile_number").value;
      const district = document.getElementById("district").value;
      const town = document.getElementById("town").value;
      user_data.name = name;
      user_data.mobile_number = mobile_number;
      user_data.district = district;
      user_data.town = town;
      localStorage.setItem("user_list", JSON.stringify(user_list));
      alert("Your Data is Successfully Stored");
    }
    function del(e) {
      e.preventDefault();
      if (confirm("Are you sure you want to delete your profile")) {
        const users = JSON.parse(localStorage.getItem("user_list"));
        const unique_id = JSON.parse(localStorage.getItem("unique"));
        function login_data(e) {
          return e.mobile_number == unique_id;
        }
        const user_data = users.find(login_data);
        const index = users.indexOf(user_data);
        users.splice(index, 1);
        localStorage.setItem("user_list", JSON.stringify(users));
        // console.log(login_data)
      }
    }
    function log_out(e) {
      alert("are you sure you want to logout");
      localStorage.removeItem("unique");
      window.location.href = "../Farmer/FARMER PAGE 1.html";
    }
</script>

    </body>

</html>